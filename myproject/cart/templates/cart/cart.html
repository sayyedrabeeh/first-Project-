{% load static %}

<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Shopping Cart</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!--===============================================================================================-->    
        <link rel="icon" type="image/png" href="{% static 'images/icons/favicon.png' %}"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'fonts/font-awesome-4.7.0/css/font-awesome.min.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'fonts/iconic/css/material-design-iconic-font.min.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'fonts/linearicons-v1.0.0/icon-font.min.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'vendor/animate/animate.css' %}">
        <!--===============================================================================================-->    
        <link rel="stylesheet" type="text/css" href="{% static 'vendor/css-hamburgers/hamburgers.min.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'vendor/animsition/css/animsition.min.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'vendor/select2/select2.min.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'vendor/perfect-scrollbar/perfect-scrollbar.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'css/util.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
        <!--===============================================================================================-->
        <style>
            .available-coupons-container {
                max-width: 1200px;
                margin: 40px auto;
                padding: 20px;
                background-color: #f5f5f5;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                font-family: 'Roboto', sans-serif;
            }
        
            /* Title Styling */
            .coupons-title {
                text-align: center;
                font-size: 32px;
                font-weight: 700;
                color: #333;
                margin-bottom: 30px;
            }
        
            /* Grid Layout for Coupon Cards */
            .coupon-cards {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                gap: 25px;
                justify-content: center;
            }
        
            /* Individual Coupon Card Styling */
            .coupon-card {
                background-color: #ffffff;
                border-radius: 12px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
                padding: 25px;
                transition: all 0.3s ease;
                text-align: center;
            }
        
            /* Hover Effect for Cards */
            .coupon-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            }
        
            /* Coupon Code Styling */
            .coupon-header {
                font-size: 22px;
                font-weight: 600;
                color: #2c3e50;
                margin-bottom: 15px;
            }
        
            .coupon-code {
                background-color: #2c3e50;
                color: white;
                padding: 10px 20px;
                border-radius: 6px;
                font-size: 18px;
                letter-spacing: 1px;
            }
        
            /* Discount Value Styling */
            .coupon-discount {
                font-size: 24px;
                font-weight: 700;
                color: #e67e22;
                margin-bottom: 20px;
            }
        
            .discount-value {
                font-size: 30px;
                color: #e74c3c;
            }
        
            /* Description Text Styling */
            .discount-text {
                font-size: 16px;
                color: #7f8c8d;
            }
        
            /* Message when no coupons are available */
            .no-coupons {
                text-align: center;
                font-size: 18px;
                color: #95a5a6;
                margin-top: 20px;
            }
        
            /* Responsive Design */
            @media (max-width: 768px) {
                .coupons-title {
                    font-size: 28px;
                }
        
                .coupon-cards {
                    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
                }
        
                .coupon-card {
                    padding: 20px;
                }
            }
            /* Removes default spinner styles for better control */
            input[type="number"] {
                -webkit-appearance: none; /* Removes default spinner in Chrome/Safari */
                -moz-appearance: textfield; /* Removes spinner in Firefox */
                appearance: textfield; /* Standard reset */
                width: 70px; /* Adjust width for buttons */
                padding: 5px; /* Add padding */
                text-align: center; /* Center the text */
                position: relative; /* Required for custom styles */
                border: 1px solid #ccc; /* Default border */
                border-radius: 4px; /* Rounded edges */
            }
            
            /* Always show increase/decrease buttons */
            input[type="number"]::-webkit-inner-spin-button,
            input[type="number"]::-webkit-outer-spin-button {
                opacity: 1 !important; /* Force buttons to always show */
                pointer-events: all; /* Ensure they're interactive */
            }
            
            /* Optional: Add focus styling */
            input[type="number"]:focus {
                outline: none;
                border-color: #007bff;
            }
            
            
        </style>
    </head>
    


<body class="animsition">
	
	<!-- Header -->
 
<header class="header-v4">
    <!-- Header desktop -->
    <div class="container-menu-desktop">
        <!-- Topbar -->
        <div class="top-bar">
            <div class="content-topbar flex-sb-m h-full container">
                <div class="left-top-bar">
                    Free shipping for standard order over $100
                </div>

                <div class="right-top-bar flex-w h-full">
                    <a href="#" class="flex-c-m trans-04 p-lr-25">
                        Help & FAQs
                    </a>

                    <a href="#" class="flex-c-m trans-04 p-lr-25">
                        My Account
                    </a>

                    <a href="#" class="flex-c-m trans-04 p-lr-25">
                        EN
                    </a>

                    <a href="#" class="flex-c-m trans-04 p-lr-25">
                        USD
                    </a>
                </div>
            </div>
        </div>

        <div class="wrap-menu-desktop how-shadow1">
            <nav class="limiter-menu-desktop container">
					
                <!-- Logo desktop -->		
                <a href="#" class="logo">
                    <a href="{% url 'products:home' %}"><span class="sidebar-title" style='color: black;font-size: 35px;font-weight: 900; '>NANORIDE</span>

                 </a>

                <!-- Menu desktop -->
                <div class="menu-desktop">
                    <ul class="main-menu">
                        <li>
                            <a href="{% url 'products:home' %}">Home</a>
                             
                        </li>

                        <li>
                            <a href="{% url 'products:products' %}">Shop</a>
                        </li>

                        {% comment %} <li class="label1" data-label1="hot">
                            <a href="#">Features</a>
                        </li>

                        <li>
                            <a href="#">Blog</a>
                        </li>

                        <li>
                            <a href="#">About</a>
                        </li>

                        <li>
                            <a href="#">Contact</a>
                        </li> {% endcomment %}
                    </ul>
                </div>	

                <!-- Icon header -->
                <div class="wrap-icon-header flex-w flex-r-m">
                    {% comment %} <div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-show-modal-search">
                        <i class="zmdi zmdi-search"></i>
                    </div> {% endcomment %}
                    <a href="{% url 'cart:cart_view'  %}">
                    <div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11   js-show-cart" >
                        <i class="zmdi zmdi-shopping-cart"></i>
                    </div>  
                       </a>
                    <a href="{% url 'products:wishlist' 'view' %}" class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11  " data-notify="0">
                        <i class="zmdi zmdi-favorite-outline"></i>
                    </a>
                </div>
            </nav>
        </div>    
    </div>

    <!-- Header Mobile -->
    <div class="wrap-header-mobile">
        <!-- Logo moblie -->        
        <div class="logo-mobile">
            <a href=""><img src="{% static 'images/icons/logo-01.png' %}" alt="IMG-LOGO"></a>
        </div>

        <!-- Icon header -->
        <div class="wrap-icon-header flex-w flex-r-m m-r-15">
            <div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 js-show-modal-search">
                <i class="zmdi zmdi-search"></i>
            </div>

            <div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti js-show-cart" data-notify="2">
                <i class="zmdi zmdi-shopping-cart"></i>
            </div>

            <a href="#" class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti" data-notify="0">
                <i class="zmdi zmdi-favorite-outline"></i>
            </a>
        </div>

        <!-- Button show menu -->
        <div class="btn-show-menu-mobile hamburger hamburger--squeeze">
            <span class="hamburger-box">
                <span class="hamburger-inner"></span>
            </span>
        </div>
    </div>

    <!-- Menu Mobile -->
    <div class="menu-mobile">
        <ul class="topbar-mobile">
            <li>
                <div class="left-top-bar">
                    Free shipping for standard order over $100
                </div>
            </li>

            <li>
                <div class="right-top-bar flex-w h-full">
                    <a href="#" class="flex-c-m p-lr-10 trans-04">
                        Help & FAQs
                    </a>

                    <a href="#" class="flex-c-m p-lr-10 trans-04">
                        My Account
                    </a>

                    <a href="#" class="flex-c-m p-lr-10 trans-04">
                        EN
                    </a>

                    <a href="#" class="flex-c-m p-lr-10 trans-04">
                        USD
                    </a>
                </div>
            </li>
        </ul>

        <ul class="main-menu-m">
            <li>
                <a href="">Home</a>
                 
                <span class="arrow-main-menu-m">
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </span>
            </li>

            <li>
                <a href="">Shop</a>
            </li>

            {% comment %} <li>
                <a href="shoping-cart.html" class="label1 rs1" data-label1="hot">Features</a>
            </li>

            <li>
                <a href="blog.html">Blog</a>
            </li>

            <li>
                <a href="about.html">About</a>
            </li>

            <li>
                <a href="contact.html">Contact</a>
            </li> {% endcomment %}
        </ul>
    </div>

    <!-- Modal Search -->
    {% comment %} <div class="modal-search-header flex-c-m trans-04 js-hide-modal-search">
        <div class="container-search-header">
            <button class="flex-c-m btn-hide-modal-search trans-04 js-hide-modal-search">
                <img src="{% static 'images/icons/icon-close2.png' %}" alt="CLOSE">
            </button>

            <form class="wrap-search-header flex-w p-l-15">
                <button class="flex-c-m trans-04">
                    <i class="zmdi zmdi-search"></i>
                </button>
                <input class="plh3" type="text" name="search" placeholder="Search...">
            </form>
        </div>
    </div> {% endcomment %}
</header>


	<!-- Cart -->
 
    
    


	<!-- breadcrumb -->
	<div class="container">
		<div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
			<a href="" class="stext-109 cl8 hov-cl1 trans-04">
				Home
				<i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
			</a>

			<span class="stext-109 cl4">
				Shoping Cart
			</span>
		</div>
	</div>
		

	 
    {% if cart_items %}
 
<div class="bg0 p-t-75 p-b-85">
    <div class="container">
        {% if out_of_stock_items %}
        <div class="alert alert-danger">
            The following products are out of stock:
            <ul>
            {% for item in out_of_stock_items %}
                <li>{{ item.product.name }} ({{ item.size.name }})</li>
            {% endfor %}
            </ul>
        </div>
    {% endif %}
        <div class="row">
            <div class="col-lg-10 col-xl-7 m-lr-auto m-b-50">
                <div class="m-l-25 m-r--38 m-lr-0-xl">
                    <div class="wrap-table-shopping-cart">
                       <table class="table-shopping-cart">
    <thead>
        <tr class="table_head">
            <th class="column-1">Product</th>
            <th class="column-2">Size</th>
            <th class="column-3">Price</th>
            <th class="column-4">Quantity</th>
            <th class="column-5">Total</th>
            <th class="column-6">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for i in cart_items %}
        <tr class="table_row">
            <td class="column-1">
                <div class="how-itemcart1" style="width: 150px; height: 150px;">
                    {% with i.product.additional_images.first as image %}
                    {% if image %}
                        <img src="{{ image.image.url }}" alt="IMG" style="width: 100%; height: 100%; object-fit: cover;">
                    {% else %}
                        <img src="{% static 'images/default.jpg' %}" alt="Default Image" style="width: 100%; height: 100%; object-fit: cover;">
                    {% endif %}
                    {% endwith %}
                    {% if i.quantity > i.stock %}
                        <div class="out-of-stock-label" style="position: absolute; top: 10px; left: 10px; background: rgba(0, 0, 0, 0.7); color: white; padding: 5px 10px; font-size: 14px;">
                            Stock is finished
                        </div>
                    {% endif %}
                </div>
                <div><span>{{ i.product.name }}</span></div>
            </td>
            <td class="column-2">{{ i.size.name }}</td> 
            <td class="column-3">₹{{ i.product.price }}</td>
            <td class="column-4">
               <form action="{% url 'cart:cart_view' 'update_quantity' %}" method="post">
                   {% csrf_token %}
                   <input type="hidden" name="product_id" value="{{ i.product.id }}">
                   <input type="hidden" name="size_id" value="{{ i.size.id }}">
                   <input 
                       type="number" 
                       name="quantity" 
                       value="{{ i.quantity }}" 
                       min="1" 
                       max="{{ i.stock }}" 
                       onchange="this.form.submit()" 
                       style="width: 50px; text-align: center;">
               </form>
            </td>
            <td class="column-5">
                 $<span id="total-price">{{ i.item_total }}</span>
            </td>
             <td class="column-6">
                <form action="{% url 'cart:cart_view' 'remove' %}" method="post" style="display: inline;">
                    {% csrf_token %}
                    <input type='hidden' name='product_id' value='{{i.product.id}}'/>
                    <input type='hidden' name='size_id' value='{{i.size.id}}'/>
                    <button type="submit" style="background-color: #ff4d4d; color: white; padding: 5px 10px; border: none; border-radius: 4px; cursor: pointer;margin-right:10px;">
                        Remove
                    </button>
                </form>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

                                      </div>
                                     
                                    
                </div>
                <div class="available-coupons-container">
                    <h3 class="coupons-title">Exclusive Coupons for You</h3>
                
                    <!-- Coupon Cards -->
                    <div class="coupon-cards" id="couponCards">
                        {% for coupon in coupons %}
                            <div class="coupon-card">
                                <div class="coupon-header">
                                    <span class="coupon-code">{{ coupon.code }}</span>
                                </div>
                                <div class="coupon-body">
                                    <div class="coupon-discount">
                                        <span class="discount-value">{{ coupon.discount }}</span> OFF
                                    </div>
                                    <p class="discount-text">Apply this coupon to get <strong>{{ coupon.discount }} off</strong> your next purchase.</p>
                                </div>
                            </div>
                        {% empty %}
                            <p class="no-coupons">No coupons available at the moment. Check back soon!</p>
                        {% endfor %}
                    </div>
                </div>                     {% if error %}
                      <p style="color: red;">{{ error }}</p>
                     {% endif %}
                     
                
                
            </div>

            
       
              <div class="col-sm-10 col-lg-7 col-xl-5 m-lr-auto m-b-50">
                <div class="bor10 p-lr-40 p-t-30 p-b-40 m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm">
                    <h4 class="mtext-109 cl2 p-b-30">
                        Cart Totals
                    </h4>

                   
              

            <div class="cart-items">
                {% for i in cart_items %}
                <div class="cart-item" style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #e6e6e6; padding: 15px 0;">
                    <!-- Product Details -->
                    <div class="product-details" style="flex: 3;">
                        <h4 style="font-size: 18px; font-weight: 600; margin: 0 0 5px; color: #333;">{{ i.product.name }}</h4>
                        <p style="font-size: 14px; color: #777; margin: 0;">Size: {{ i.size.name }}</p>
                    </div>
        
                    <!-- Quantity -->
                    <div class="product-quantity" style="flex: 1; text-align: center;">
                        <span style="font-size: 16px; font-weight: 500; background: #f9f9f9; padding: 5px 10px; border-radius: 5px; border: 1px solid #ddd;"> {{ i.quantity }}</span>
                    </div>
                    
                    <!-- Price -->
                    <div class="product-price" style="flex: 1; text-align: right;">
                        <span style="font-size: 18px; font-weight: bold; color: #007bff;">₹{{ i.item_total }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
        
            <!-- Total Section -->
            <div class="cart-total" style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #ddd;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-size: 20px; font-weight: bold; color: #333;">Total:</span>
                    <span id="totalPrice" style="font-size: 22px; font-weight: bold; color: #222;">₹{{ total_price }}</span>
                </div>
            </div>
            </div> 
            <div style="text-align: center; margin-top: 30px;">
                <a id="payment-btn" href="{% url 'cart:payment' %}" 
                   style="display: inline-block; padding: 12px 30px; font-size: 16px; font-weight: bold; color: #fff; background-color: #007bff; text-decoration: none; border-radius: 30px; transition: background-color 0.3s ease; {% if out_of_stock_items %}disabled {% endif %}">
                    Proceed to Payment
                </a>
            </div>
            

        </div>
    </div> 
</div>
</div>
{% else %}
    <div class="empty-cart-message" style="text-align: center; padding: 50px;">
      <h2 style="font-size: 24px; color: #555;">Your cart is empty</h2>
      <p style="font-size: 16px; color: #888; margin:20px 0px;">Looks like you haven't added anything to your cart yet.</p>
      <a href="{% url 'products:products' %}" 
         style="font-size: 18px; color: #ffffff; background-color: #007bff; padding: 10px 20px; text-decoration: none; border-radius: 5px;margin-top:100px;">
         Start Shopping
      </a>
    </div>
  {% endif %}
		

	<!-- Footer -->
	<footer class="bg3 p-t-75 p-b-32">
		<div class="container">
			<div class="row">
				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">
						Categories
					</h4>

					<ul>
						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								benz
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Bmw
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								ferari
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								rollce royce
							</a>
						</li>
					</ul>
				</div>

				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">
						Help
					</h4>

					<ul>
						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Track Order
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Returns 
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Shipping
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								FAQs
							</a>
						</li>
					</ul>
				</div>

				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">
						GET IN TOUCH
					</h4>

					<p class="stext-107 cl7 size-201">
						Any questions? Let us know in store at 3th floor, kinfra ,kakenchery or call us on (+91) 96 716 68790
					</p>

					<div class="p-t-27">
						<a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
							<i class="fa fa-facebook"></i>
						</a>

						<a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
							<i class="fa fa-instagram"></i>
						</a>

						<a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
							<i class="fa fa-pinterest-p"></i>
						</a>
					</div>
				</div>

				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">
						Newsletter
					</h4>

					<form>
						<div class="wrap-input1 w-full p-b-4">
							<input class="input1 bg-none plh1 stext-107 cl7" type="text" name="email" placeholder="email@example.com">
							<div class="focus-input1 trans-04"></div>
						</div>

						<div class="p-t-18">
							<button class="flex-c-m stext-101 cl0 size-103 bg1 bor1 hov-btn2 p-lr-15 trans-04">
								Subscribe
							</button>
						</div>
					</form>
				</div>
			</div>

			<div class="p-t-40">

<div class="flex-c-m flex-w p-b-18">
    <a href="#" class="m-all-1">
        <img src="{% static 'images/icons/icon-pay-01.png' %}" alt="ICON-PAY">
    </a>

    <a href="#" class="m-all-1">
        <img src="{% static 'images/icons/icon-pay-02.png' %}" alt="ICON-PAY">
    </a>

    <a href="#" class="m-all-1">
        <img src="{% static 'images/icons/icon-pay-03.png' %}" alt="ICON-PAY">
    </a>

    <a href="#" class="m-all-1">
        <img src="{% static 'images/icons/icon-pay-04.png' %}" alt="ICON-PAY">
    </a>

    <a href="#" class="m-all-1">
        <img src="{% static 'images/icons/icon-pay-05.png' %}" alt="ICON-PAY">
    </a>
</div>
 
			</div>
		</div>
	</footer>


 
	<div class="btn-back-to-top" id="myBtn">
		<span class="symbol-btn-back-to-top">
			<i class="zmdi zmdi-chevron-up"></i>
		</span>
	</div>

 
<script src="{% static 'vendor/jquery/jquery-3.2.1.min.js' %}"></script>
<script src="{% static 'vendor/animsition/js/animsition.min.js' %}"></script>
<script src="{% static 'vendor/bootstrap/js/popper.js' %}"></script>
<script src="{% static 'vendor/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'vendor/select2/select2.min.js' %}"></script>
<script>
    $(".js-select2").each(function(){
        $(this).select2({
            minimumResultsForSearch: 20,
            dropdownParent: $(this).next('.dropDownSelect2')
        });
    })
</script>
<script src="{% static 'vendor/MagnificPopup/jquery.magnific-popup.min.js' %}"></script>
<script src="{% static 'vendor/perfect-scrollbar/perfect-scrollbar.min.js' %}"></script>
<script>
    $('.js-pscroll').each(function(){
        $(this).css('position','relative');
        $(this).css('overflow','hidden');
        var ps = new PerfectScrollbar(this, {
            wheelSpeed: 1,
            scrollingThreshold: 1000,
            wheelPropagation: false,
        });

        $(window).on('resize', function(){
            ps.update();
        })
    });
</script>
<script src="{% static 'js/main.js' %}"></script>
<script>
{% if out_of_stock_items %}
    document.getElementById('payment-btn').style.pointerEvents = 'none';  
    document.getElementById('payment-btn').style.opacity = '0.5';   
{% endif %}  
</script>

</body>
</html>