 
{% load static %}

<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Shopping Cart</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!--===============================================================================================-->    
        <link rel="icon" type="image/png" href="{% static 'images/icons/favicon.png' %}"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'fonts/font-awesome-4.7.0/css/font-awesome.min.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'fonts/iconic/css/material-design-iconic-font.min.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'fonts/linearicons-v1.0.0/icon-font.min.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'vendor/animate/animate.css' %}">
        <!--===============================================================================================-->    
        <link rel="stylesheet" type="text/css" href="{% static 'vendor/css-hamburgers/hamburgers.min.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'vendor/animsition/css/animsition.min.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'vendor/select2/select2.min.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'vendor/perfect-scrollbar/perfect-scrollbar.css' %}">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'css/util.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
        <!--===============================================================================================-->
        <style>
            .available-coupons-container {
                font-family: 'Arial', sans-serif;
                margin-top: 30px;
                margin-left: 20px;
                color: #333;
            }
            
            h3 {
                font-size: 1.5em;
                color: #2c3e50;
                font-weight: bold;
                text-align: center;
                margin-bottom: 20px;
            }
            
            .toggle-coupons-btn {
                background-color: #3498db;
                color: white;
                padding: 10px 20px;
                border: none;
                border-radius: 5px;
                font-size: 1.1em;
                cursor: pointer;
                transition: background-color 0.3s ease;
                margin-bottom: 20px;
                display: block;
                margin-left: auto;
                margin-right: auto;
            }
            
            .toggle-coupons-btn:hover {
                background-color: #2980b9;
            }
            
            .coupon-cards {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                gap: 20px;
                margin-top: 20px;
            }
            
            .coupon-card {
                background: linear-gradient(135deg, #3498db, #8e44ad);
                color: white;
                border-radius: 10px;
                padding: 20px;
                text-align: center;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
                position: relative;
            }
            
            .coupon-card:hover {
                transform: translateY(-10px);
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            }
            
            .coupon-header {
                font-size: 1.3em;
                font-weight: bold;
                letter-spacing: 1px;
                margin-bottom: 15px;
                color: #f39c12;
            }
            
            .coupon-code {
                font-size: 1.5em;
                color: #f1c40f;
            }
            
            .coupon-body {
                margin-bottom: 20px;
            }
            
            .coupon-discount {
                font-size: 2em;
                font-weight: bold;
                margin-bottom: 15px;
                color: #ecf0f1;
            }
            
            .discount-value {
                font-size: 2.5em;
                color: #e74c3c;
            }
            
            .coupon-description {
                font-size: 1em;
                color: #ecf0f1;
                padding: 10px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 8px;
            }
            
            .coupon-footer {
                font-size: 0.9em;
                color: #f1c40f;
                margin-top: 10px;
                font-weight: 500;
            }
            
            .expiry-date {
                font-size: 1.1em;
                font-weight: bold;
                color: #f39c12;
            }
            
            .coupon-card::after {
                content: '';
                position: absolute;
                top: 0;
                left: 50%;
                width: 40%;
                height: 5px;
                background-color: #e74c3c;
                transform: translateX(-50%);
                border-radius: 3px;
                box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            }
            
            .cart-container {
                background-color: #ffffff;
                border-radius: 10px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                padding: 20px;
                max-width: 900px;
                margin: 20px auto;
                font-family: Arial, sans-serif;
            }
            
            .cart-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 15px 0;
                border-bottom: 1px solid #e6e6e6;
            }
            
            .cart-item:last-child {
                border-bottom: none;
            }
            
            .product-details h4 {
                font-size: 18px;
                color: #333;
                margin: 0;
            }
            
            .product-details p {
                font-size: 14px;
                color: #777;
                margin: 5px 0 0;
            }
            
            .product-quantity span {
                font-size: 16px;
                padding: 5px 10px;
                border-radius: 5px;
                background: #f9f9f9;
                border: 1px solid #ddd;
            }
            
            .product-price span {
                font-size: 18px;
                font-weight: bold;
                color: #007bff;
            }
            
            .cart-total {
                padding-top: 20px;
                margin-top: 20px;
                border-top: 2px solid #ddd;
                text-align: right;
            }
            .address-section {
                max-width: 900px;
                margin: 20px auto;
              }
              
              .address-list ul {
                list-style: none;
                padding: 0;
              }
              
              .address-list li {
                background: #f0f0f0;
                padding: 10px;
                margin: 5px 0;
                border-radius: 5px;
              }
              
              button {
                padding: 10px 15px;
                margin: 10px 0;
                cursor: pointer;
              }
              
              #addAddressForm {
                background: #f9f9f9;
                padding: 15px;
                border-radius: 5px;
                border: 1px solid #ccc;
              }
              .address-card {
                cursor: pointer;
                transition: box-shadow 0.3s ease, border-color 0.3s ease;
                border: 2px solid #ddd;
                overflow: hidden;
                background-color: #fff;
            }
            
            .address-card:hover {
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                border-color: #007bff;
            }
            
            .address-card .form-check-input {
                opacity: 0; /* Hide default radio button */
                z-index: -1; /* Prevent interaction */
            }
            
            .address-card .address-content {
                text-align: left;
                font-size: 16px;
            }
            
            .address-card .form-check-input:checked + .address-content {
                border-left: 5px solid #007bff;
                padding-left: 10px;
            }
            
            .styled-select {
                width: 100%;
                padding: 10px 15px;
                border: 1px solid #ccc;
                border-radius: 5px;
                font-size: 16px;
                color: #333;
                background: #fff;
                appearance: none; /* Removes default arrow for consistency */
                background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3E%3Cpath fill='%23333' d='M2 0L0 2h4z'/%3E%3C/svg%3E");
                background-repeat: no-repeat;
                background-position: right 10px top 50%;
                background-size: 10px 10px;
            }
            
            .styled-select:focus {
                border-color: #007bff;
                outline: none;
                box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
            }
            .payment-method-section {
                padding: 20px;
                border: 1px solid #ddd;
                border-radius: 8px;
                background-color: #f9f9f9;
                max-width: 900px;
                margin: 20px auto;
                font-family: Arial, sans-serif;
            }
            
            .section-title {
                font-size: 20px;
                font-weight: bold;
                margin-bottom: 20px;
                color: #333;
                text-align: center;
            }
            
            .payment-option {
                display: flex;
                align-items: center;
                padding: 15px;
                margin-bottom: 15px;
                border: 1px solid #ddd;
                border-radius: 8px;
                background-color: #fff;
                cursor: pointer;
                transition: all 0.3s ease;
            }
            
            .payment-option:hover {
                background-color: #f1f1f1;
                border-color: #007bff;
            }
            
            .payment-option input {
                margin-right: 15px;
                accent-color: #007bff;
                transform: scale(1.2);
                cursor: pointer;
            }
            
            .option-label {
                font-size: 16px;
                color: #555;
            }
            
            .btn-submit {
                width: 100%;
                padding: 12px 20px;
                font-size: 16px;
                font-weight: bold;
                color: #fff;
                background-color: #007bff;
                border: none;
                border-radius: 8px;
                cursor: pointer;
                text-align: center;
                transition: background-color 0.3s ease;
            }
            
            .btn-submit:hover {
                background-color: #0056b3;
            }
            /* Custom Styles */
.custom-card {
    background-color: #f9f9f9;  /* Light grey background for the card */
    border: 1px solid #ddd;     /* Subtle border for the card */
    border-radius: 10px;         /* Slight rounding of corners */
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);  /* Soft shadow for the card */
}

.card-body {
    padding: 3rem;  /* Add padding to create breathing space */
}

.custom-input {
    font-size: 1.1rem;             /* Larger font size for better readability */
    padding: 1.2rem;               /* More padding for comfort */
    border-radius: 8px;            /* Rounded input corners */
    border: 2px solid #ccc;       /* Subtle border color */
    transition: border 0.3s ease-in-out; /* Smooth border color transition */
}

.custom-input:focus {
    border-color: #007bff;        /* Blue border on focus for a professional look */
    box-shadow: 0 0 5px rgba(0, 123, 255, 0.5); /* Subtle glow around the input on focus */
    outline: none;                /* Remove outline for cleaner focus effect */
}

.custom-btn {
    font-size: 1.1rem;             /* Larger text for readability */
    padding: 1.2rem;               /* Comfortable padding */
    border-radius: 8px;            /* Rounded button corners */
    transition: background-color 0.3s ease; /* Smooth background color transition */
}

.custom-btn:hover {
    background-color: #0056b3;      /* Darker blue when hovering over the button */
    border-color: #0056b3;          /* Matching border color for the hover effect */
}

/* Responsive Design */
@media (max-width: 767px) {
    .custom-card {
        padding: 1.5rem;  /* Slightly smaller padding on mobile */
    }

    .custom-input {
        font-size: 1rem;   /* Reduce font size for mobile */
    }

    .custom-btn {
        font-size: 1rem;   /* Reduce button font size on mobile */
    }
}

/* Initially hide the coupon form */
#couponForm1 {
    display: none;
}

/* Show coupon form when checkbox is checked */
#couponToggle:checked + #addCouponButton + #couponForm1 {
    display: block;
}

/* Optional: Styling for the button and the form */
#addCouponButton {
    cursor: pointer;
}
/* Customize message container */
.alert-container {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 9999;
}

.alert {
    padding: 15px;
    margin: 5px;
    border-radius: 5px;
}

/* Success Message Style */
.alert-success {
    background-color: #d4edda;
    color: #155724;
    border-color: #c3e6cb;
}

/* Danger Message Style */
.alert-error {
    background-color: #f8d7da;
    color: #721c24;
    border-color: #f5c6cb;
}

/* Info Message Style */
.alert-info {
    background-color: #d1ecf1;
    color: #0c5460;
    border-color: #bee5eb;
}

/* Warning Message Style */
.alert-warning {
    background-color: #fff3cd;
    color: #856404;
    border-color: #ffeeba;
}
      
        </style>
    </head>
    


<body class="animsition">
	
	<!-- Header -->
 
<header class="header-v4">
    <!-- Header desktop -->
    <div class="container-menu-desktop">
        <!-- Topbar -->
        <div class="top-bar">
            <div class="content-topbar flex-sb-m h-full container">
                <div class="left-top-bar">
                    Free shipping for standard order over $100
                </div>

                <div class="right-top-bar flex-w h-full">
                    <a href="#" class="flex-c-m trans-04 p-lr-25">
                        Help & FAQs
                    </a>

                    <a href="#" class="flex-c-m trans-04 p-lr-25">
                        My Account
                    </a>

                    <a href="#" class="flex-c-m trans-04 p-lr-25">
                        EN
                    </a>

                    <a href="#" class="flex-c-m trans-04 p-lr-25">
                        USD
                    </a>
                </div>
            </div>
        </div>

        <div class="wrap-menu-desktop how-shadow1">
            <nav class="limiter-menu-desktop container">
					
                <!-- Logo desktop -->		
                <a href="#" class="logo">
                    <a href="{% url 'products:home' %}"><span class="sidebar-title" style='color: black;font-size: 35px;font-weight: 900; '>NANORIDE</span>

                 </a>

                <!-- Menu desktop -->
                <div class="menu-desktop">
                    <ul class="main-menu">
                        <li>
                            <a href="{% url 'products:home' %}">Home</a>
                             
                        </li>

                        <li>
                            <a href="{% url 'products:products' %}">Shop</a>
                        </li>

                        <li class="label1" data-label1="hot">
                            <a href="#">Features</a>
                        </li>

                        <li>
                            <a href="#">Blog</a>
                        </li>

                        <li>
                            <a href="#">About</a>
                        </li>

                        <li>
                            <a href="#">Contact</a>
                        </li>
                    </ul>
                </div>	

                <!-- Icon header -->
                <div class="wrap-icon-header flex-w flex-r-m">
                    <div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-show-modal-search">
                        <i class="zmdi zmdi-search"></i>
                    </div>

                    <div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti js-show-cart" data-notify="{{ cart_items_count }}">
                        <i class="zmdi zmdi-shopping-cart"></i>
                    </div>

                    <a href="#" class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti" data-notify="0">
                        <i class="zmdi zmdi-favorite-outline"></i>
                    </a>
                </div>
            </nav>
        </div>    
    </div>

    <!-- Header Mobile -->
    <div class="wrap-header-mobile">
        <!-- Logo moblie -->        
        <div class="logo-mobile">
            <a href="index.html"><img src="{% static 'images/icons/logo-01.png' %}" alt="IMG-LOGO"></a>
        </div>

        <!-- Icon header -->
        <div class="wrap-icon-header flex-w flex-r-m m-r-15">
            <div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 js-show-modal-search">
                <i class="zmdi zmdi-search"></i>
            </div>

            <div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti js-show-cart" data-notify="2">
                <i class="zmdi zmdi-shopping-cart"></i>
            </div>

            <a href="#" class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti" data-notify="0">
                <i class="zmdi zmdi-favorite-outline"></i>
            </a>
        </div>

        <!-- Button show menu -->
        <div class="btn-show-menu-mobile hamburger hamburger--squeeze">
            <span class="hamburger-box">
                <span class="hamburger-inner"></span>
            </span>
        </div>
    </div>

    <!-- Menu Mobile -->
    <div class="menu-mobile">
        <ul class="topbar-mobile">
            <li>
                <div class="left-top-bar">
                    Free shipping for standard order over $100
                </div>
            </li>

            <li>
                <div class="right-top-bar flex-w h-full">
                    <a href="#" class="flex-c-m p-lr-10 trans-04">
                        Help & FAQs
                    </a>

                    <a href="#" class="flex-c-m p-lr-10 trans-04">
                        My Account
                    </a>

                    <a href="#" class="flex-c-m p-lr-10 trans-04">
                        EN
                    </a>

                    <a href="#" class="flex-c-m p-lr-10 trans-04">
                        USD
                    </a>
                </div>
            </li>
        </ul>

        <ul class="main-menu-m">
            <li>
                <a href="index.html">Home</a>
                 
                <span class="arrow-main-menu-m">
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </span>
            </li>

            <li>
                <a href="product.html">Shop</a>
            </li>

            <li>
                <a href="shoping-cart.html" class="label1 rs1" data-label1="hot">Features</a>
            </li>

            <li>
                <a href="blog.html">Blog</a>
            </li>

            <li>
                <a href="about.html">About</a>
            </li>

            <li>
                <a href="contact.html">Contact</a>
            </li>
        </ul>
    </div>

    <!-- Modal Search -->
    <div class="modal-search-header flex-c-m trans-04 js-hide-modal-search">
        <div class="container-search-header">
            <button class="flex-c-m btn-hide-modal-search trans-04 js-hide-modal-search">
                <img src="{% static 'images/icons/icon-close2.png' %}" alt="CLOSE">
            </button>

            <form class="wrap-search-header flex-w p-l-15">
                <button class="flex-c-m trans-04">
                    <i class="zmdi zmdi-search"></i>
                </button>
                <input class="plh3" type="text" name="search" placeholder="Search...">
            </form>
        </div>
    </div>
</header>


	<!-- Cart -->
 
    
    


	<!-- breadcrumb -->
	<div class="container">
		<div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
			<a href="index.html" class="stext-109 cl8 hov-cl1 trans-04">
				Home
				<i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
			</a>

			<span class="stext-109 cl4">
				Shoping Cart
			</span>
		</div>
	</div>
		

	<!-- Shoping Cart -->
   
    <div class="address-section">
        
       
        
        <button id="addAddressBtn" class="btn btn-primary mb-3">Add Address</button>
        
        {% if error %}
        <div class="text-danger">{{ error }}</div>
    {% endif %}
<div id="addAddressForm" style='display: {% if has_errors %}block{% else %}none{% endif %};'>
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <ul id="addressList"></ul>
            <!-- Modal Header -->
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="addAddressFormLabel">
                    <i class="bi bi-geo-alt-fill me-2"></i>Add New Address
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body">
                <form id="addressForm" method="POST" action="{% url 'user_profile:address' %}?next=/cart/payment/">
                    {% csrf_token %}
                    
                    <!-- Address Details Section -->
                    <h6 class="fw-bold mb-3">Address Details</h6>
                    <div class="row g-3">
                        <div class="col-md-12">
                            <label for="address_line1"  class="form-label">Address Line 1</label>
                            <input type="text" class="form-control rounded-pill"  name="address_line1" value='{{ address_line1|default:'' }}' placeholder="Street address">
                            {% if field_errors.address_line1 %}
                            <div class="text-danger">{{ field_errors.address_line1 }}</div>
                        {% endif %}
                        </div>
                        <div class="col-md-4">
                            <label for="city" class="form-label">City</label>
                            <input type="text" class="form-control rounded-pill" value='{{city}}' name="city" placeholder="City" >
                            {% if field_errors.city %}
                              <div class="text-danger">{{ field_errors.city }}</div>
                              {% endif %}
                        </div>
                        <div class="col-md-4">
                            <label for="state" class="form-label">State</label>
                            <input type="text" class="form-control rounded-pill" value='{{state}}' name="state" placeholder="State">
                            {% if field_errors.state %}
                              <div class="text-danger">{{ field_errors.state }}</div>
                            {% endif %}
                        </div>
                        <div class="col-md-4">
                            <label for="postal_code" class="form-label">Postal Code</label>
                            <input type="text" class="form-control rounded-pill" value='{{postal_code}}' name="postal_code" placeholder="Postal Code" >
                            {% if field_errors.postal_code %}
                            <div class="text-danger">{{ field_errors.postal_code }}</div>
                             {% endif %}
                        </div>
                    </div>

                    <!-- Country and Contact Details -->
                    <h6 class="fw-bold mt-4 mb-3">Contact Details</h6>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="country" class="form-label">Country</label>
                            <select class="form-select rounded-pill" value='{{country}}' name="country">
                                <option value="" disabled selected>Select Country</option>
                                <option value="US">United States</option>
                                <option value="IN">India</option>
                                <option value="GB">United Kingdom</option>
                                <option value="AF">Afghanistan</option>
                                <option value="AL">Albania</option>
                                <option value="ZW">Zimbabwe</option>
                            </select>
                            {% if field_errors.country %}
                                <div class="text-danger">{{ field_errors.country }}</div>
                            {% endif %}
                        </div>
                        <div class="col-md-6">
                            <label for="phone_number" class="form-label">Phone Number</label>
                            <input type="text" class="form-control rounded-pill" value='{{phone_number}}' name="phone_number" placeholder="Phone Number">
                            {% if field_errors.phone_number %}
                               <div class="text-danger">{{ field_errors.phone_number }}</div>
                              {% endif %}
                        </div>
                    </div>


                    <!-- Save Button -->
                    <div class="text-end mt-4">
                        <button type="submit"  id="submit-btn" class="btn btn-success btn-lg rounded-pill">
                            Save Address
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>




<div class="container py-5">
    <!-- Centered row for alignment -->
    <div class="row justify-content-center" style='margin-bottom:30px;'>
        <!-- Column for the form -->
        <div class="col-md-6">
            <!-- Card wrapper for form -->
            <div class="card custom-card shadow-lg border-light rounded-3">
                <!-- Card body for spacing -->
                <div class="card-body p-5">
                    <!-- Form title -->
                    <h5 class="card-title text-center mb-4">Apply Coupon</h5>

                    <!-- Coupon form -->
                    <form method="POST" action="{% url 'cart:apply_coupon' %}">
                        {% csrf_token %}
   {% comment %} {% if messages %}
                        <div class="messages">
                            {% for message in messages %}
                                <div class="alert alert-{{ message.tags }}">
                                    {{ message }}
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %} {% endcomment %}
                    
                        <!-- Full-width input group for the coupon code -->
                        <div class="mb-4">
                            <!-- Coupon code input field with full width -->
                             
                            <input 
                            type="text" 
                            name="coupon_code" 
                            class="form-control" 
                            placeholder="Enter Coupon Code" 
                            value="{{ coupon_code|default:'' }}" >
                            {% if messages %}
                            <div class="messages">
                                {% for message in messages %}
                                    <div class="alert alert-{{ message.tags }}">
                                        {{ message }}
                                    </div>
                                {% endfor %}
                            </div>
                        {% endif %}
                        
                             <button 
                             type="submit" 
                             class="btn btn-primary" 
                             {% if coupon_code %}name="remove_coupon"{% endif %}
                             onclick="{% if coupon_code %}clearCouponField(event){% endif %}"
                         >
                             {% if coupon_code %}Remove Coupon{% else %}Apply Coupon{% endif %}
                         </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>




    
        <!-- Display Saved Addresses -->
         <form method='POST' action={% url 'cart:payment'%}>
            {% csrf_token %}
        <div class="row">
            {% for address in addresses %}
            <div class="col-md-6 col-lg-4 mb-4">
                <label class="address-card p-4 border rounded shadow-sm d-block position-relative">
                    <!-- Radio Button -->
                    <input class="form-check-input position-absolute" type="radio" name="selected_address" value="{{ address.id }}" required>
                    <div class="address-content">
                        <h5>{{ address.address_line1 }}</h5>
                        <p>{{ address.city }}, {{ address.state }} - {{ address.postal_code }}</p>
                        <p>Phone: {{ address.phone_number }}</p>
                        <p>Country: {{ address.country }}</p>
                    </div>
                </label>
            </div>
            {% endfor %}
        </div>
    </div>
 
    <div class="payment-method-section">
        <h2 class="section-title">Payment Options</h2>
    
        <!-- Cash on Delivery Option -->
        {% if total_price <= 1000 %}
        <label class="payment-option">
            <input type="radio" name="payment_method" value="cod" required>
            <span class="option-label">Cash on Delivery</span>
        </label>
        {% endif %}
    
        <!-- Wallet Option -->
        {% if wallet_balance >= total_price %}
        <label class="payment-option">
            <input type="radio" name="payment_method" value="wallet" required>
            <span class="option-label">Pay with Wallet (Balance: ₹{{ wallet_balance }})</span>
        </label>
    {% endif %}
    
    
        <!-- Razorpay Option -->
        <label class="payment-option">
            <input type="radio"id="rzp-button1" name="payment_method" value="razorpay" required>
            <span class="option-label">Razorpay</span>
        </label>
            
    </div>
              <div class="col-sm-10  m-b-50">
                <div class="bor10 p-lr-40 p-t-30 p-b-40 m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm"style='width:800px;'>
                    <h4 class="mtext-109 cl2 p-b-30">
                        Cart Totals
                    </h4>

                   
              

            <div class="cart-items">
                {% for i in cart_items %}
                <div class="cart-item" style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #e6e6e6; padding: 15px 0;">
                    <!-- Product Details -->
                    <div class="product-details" style="flex: 3;">
                        <h4 style="font-size: 18px; font-weight: 600; margin: 0 0 5px; color: #333;">{{ i.product.name }}</h4>
                        <p style="font-size: 14px; color: #777; margin: 0;">Size: {{ i.size.name }}</p>
                    </div>
        
                    <!-- Quantity -->
                    <div class="product-quantity" style="flex: 1; text-align: center;">
                        <span style="font-size: 16px; font-weight: 500; background: #f9f9f9; padding: 5px 10px; border-radius: 5px; border: 1px solid #ddd;"> {{ i.quantity }}</span>
                    </div>
                    
                    <!-- Price -->
                    <div class="product-price" style="flex: 1; text-align: right;">
                        <span style="font-size: 18px; font-weight: bold; color: #007bff;">₹{{ i.item_total }}</span>
                    </div>

                 {% if discount %}
                    <br>  <p>Discounted Price: ₹{{ discount }}</p>
                 {% endif %}
                    
                </div>
                {% endfor %}
            </div>
            {% comment %} <div class="input-group">
                <form method="POST" action="{% url 'cart:apply_coupon' %}">
                    {% csrf_token %}
                    <div class="input-group">
                        <input type="text" name="coupon_code" class="form-control" placeholder="Enter Coupon Code">
                        <button type="submit" class="btn btn-primary">Apply Coupon</button>
                    </div>
                </form>
                
            </div> {% endcomment %}
            
            <!-- Total Section -->
            {% comment %} {% if messages %}
            <div class="alert alert-info">{{ messages }}</div>
        {% endif %} {% endcomment %}
{% comment %} 
             {% if message %}
              <div class="alert alert-danger" style='margin-top:10px;' role="alert">
                  {{ message }}
              </div>
              {% endif %} {% endcomment %}
              
            <div class="cart-total" style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #ddd;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-size: 20px; font-weight: bold; color: #333;">Total:</span>
                    <span id="totalPrice" style="font-size: 22px; font-weight: bold; color: #222;">₹{{ total_price }}</span>
                </div>
            </div>
            </div> 
            
            <div style="text-align: center; margin-top: 30px;">
                <input type='hidden' name='discount' value={{discount}}>
                <input type='hidden' name='coupon_code' value={{coupon_code}}>

                 <button type='submit' style="display: inline-block; padding: 12px 30px; font-size: 16px; font-weight: bold; color: #fff; background-color: #007bff; text-decoration: none; border-radius: 30px; transition: background-color 0.3s ease;">
                    Proceed to Payment
                 </button>
            </div>
            
        </form>
        </div>
    </div> 
</div>

  
  
		

	<!-- Footer -->
	<footer class="bg3 p-t-75 p-b-32">
		<div class="container">
			<div class="row">
				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">
						Categories
					</h4>

					<ul>
						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								benz
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Bmw
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								ferari
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								rollce royce
							</a>
						</li>
					</ul>
				</div>

				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">
						Help
					</h4>

					<ul>
						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Track Order
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Returns 
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Shipping
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								FAQs
							</a>
						</li>
					</ul>
				</div>

				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">
						GET IN TOUCH
					</h4>

					<p class="stext-107 cl7 size-201">
						Any questions? Let us know in store at 3th floor, kinfra ,kakenchery or call us on (+91) 96 716 68790
					</p>

					<div class="p-t-27">
						<a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
							<i class="fa fa-facebook"></i>
						</a>

						<a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
							<i class="fa fa-instagram"></i>
						</a>

						<a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
							<i class="fa fa-pinterest-p"></i>
						</a>
					</div>
				</div>

				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">
						Newsletter
					</h4>

					<form>
						<div class="wrap-input1 w-full p-b-4">
							<input class="input1 bg-none plh1 stext-107 cl7" type="text" name="email" placeholder="email@example.com">
							<div class="focus-input1 trans-04"></div>
						</div>

						<div class="p-t-18">
							<button class="flex-c-m stext-101 cl0 size-103 bg1 bor1 hov-btn2 p-lr-15 trans-04">
								Subscribe
							</button>
						</div>
					</form>
				</div>
			</div>

			<div class="p-t-40">

<div class="flex-c-m flex-w p-b-18">
    <a href="#" class="m-all-1">
        <img src="{% static 'images/icons/icon-pay-01.png' %}" alt="ICON-PAY">
    </a>

    <a href="#" class="m-all-1">
        <img src="{% static 'images/icons/icon-pay-02.png' %}" alt="ICON-PAY">
    </a>

    <a href="#" class="m-all-1">
        <img src="{% static 'images/icons/icon-pay-03.png' %}" alt="ICON-PAY">
    </a>

    <a href="#" class="m-all-1">
        <img src="{% static 'images/icons/icon-pay-04.png' %}" alt="ICON-PAY">
    </a>

    <a href="#" class="m-all-1">
        <img src="{% static 'images/icons/icon-pay-05.png' %}" alt="ICON-PAY">
    </a>
</div>
 
			</div>
		</div>
	</footer>


	<!-- Back to top -->
	<div class="btn-back-to-top" id="myBtn">
		<span class="symbol-btn-back-to-top">
			<i class="zmdi zmdi-chevron-up"></i>
		</span>
	</div>

<!--===============================================================================================-->	
<script src="{% static 'vendor/jquery/jquery-3.2.1.min.js' %}"></script>
<script src="{% static 'vendor/animsition/js/animsition.min.js' %}"></script>
<script src="{% static 'vendor/bootstrap/js/popper.js' %}"></script>
<script src="{% static 'vendor/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'vendor/select2/select2.min.js' %}"></script>
<script>
    $(".js-select2").each(function(){
        $(this).select2({
            minimumResultsForSearch: 20,
            dropdownParent: $(this).next('.dropDownSelect2')
        });
    })
</script>
<script src="{% static 'vendor/MagnificPopup/jquery.magnific-popup.min.js' %}"></script>
<script src="{% static 'vendor/perfect-scrollbar/perfect-scrollbar.min.js' %}"></script>
<script>
    $('.js-pscroll').each(function(){
        $(this).css('position','relative');
        $(this).css('overflow','hidden');
        var ps = new PerfectScrollbar(this, {
            wheelSpeed: 1,
            scrollingThreshold: 1000,
            wheelPropagation: false,
        });

        $(window).on('resize', function(){
            ps.update();
        })
    });
</script>
<script src="{% static 'js/main.js' %}"></script>
<script>
    // Elements
const addAddressBtn = document.getElementById('addAddressBtn');
const addAddressForm = document.getElementById('addAddressForm');
{% comment %} const cancelBtn = document.getElementById('cancelBtn'); {% endcomment %}
const addressList = document.getElementById('addressList');
const addressForm = document.getElementById('addressForm');

// Toggle the address form visibility
addAddressBtn.addEventListener('click', () => {
  addAddressForm.style.display = addAddressForm.style.display === 'none' ? 'block' : 'none';
});

 

// Handle form submission
addressForm.addEventListener('submit', (e) => {
   addressForm.submit(); 

  // Get form data
  const address = document.getElementById('address_line1').value;
  const city = document.getElementById('city').value;
  const country = document.getElementById('country').value;

  // Add the new address to the list
 

  // Reset form and hide it
  addressForm.reset();
  addAddressForm.style.display = 'none';
});


</script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
    var options = {
        "key": "{{ 6GQWCCkH3CjePVXgIW2kqgt3 }}",   
        "amount": "{{ total_price_in_paise }}",   
        "currency": "INR",
        "order_id": "{{ razorpay_order_id }}",  
        "handler": function (response){
            const successUrl = "{% url 'cart:success_page' %}?order_id={{ order_id}}";
            window.location.href = successUrl;
        },
        "prefill": {
            "name": "{{ user.username }}",
           "email": "{{ user.email }}",
        },
        "theme": {
            "color": "#3399cc"
        }
         
    };
    var rzp1 = new Razorpay(options);
    rzp1.open();

   document.addEventListener('DOMContentLoaded', () => {

       
            const hasErrors = "{{ has_errors|yesno:'true,false' }}" === 'true';
            if (hasErrors) {
                document.getElementById('addAddressForm').style.display = 'block';
            }
        // Safely select elements
        const addAddressBtn = document.getElementById('addAddressBtn');
        const addAddressForm = document.getElementById('addAddressForm');
        const cancelBtn = document.getElementById('cancelBtn');
        const addressList = document.getElementById('addressList');
        const addressForm = document.getElementById('addressForm');
    
        // Check if the elements exist to prevent errors
        if (addAddressBtn && addAddressForm) {
            addAddressBtn.addEventListener('click', () => {
                addAddressForm.style.display = addAddressForm.style.display === 'none' ? 'block' : 'none';
            });
        }
    
        if (cancelBtn && addAddressForm) {
            cancelBtn.addEventListener('click', () => {
                addAddressForm.style.display = 'none';
            });
        }
        if (cancelBtn) {
            cancelBtn.addEventListener('click', () => {
                addAddressForm.style.display = 'none';
            });
        }
        
    
        if (addressForm) {
            addressForm.addEventListener('submit', (e) => {
                e.preventDefault(); // Prevent page reload
    
                // Get form data
                const address = document.getElementById('address')?.value.trim();
                const city = document.getElementById('city')?.value.trim();
                const country = document.getElementById('country')?.value.trim();
    
                if (address && city && country) {
                    // Add the new address to the list
                    const newAddressItem = document.createElement('li');
                    newAddressItem.textContent = `${address}, ${city}, ${country}`;
                    addressList.appendChild(newAddressItem);
    
                    // Reset form and hide it
                    addressForm.reset();
                    addAddressForm.style.display = 'none';
                } else {
                    alert("All fields are required!");
                }
            });
        }

    });
        // Select the button and form container
        document.getElementById("coupon-btn").addEventListener("click", function () {
            const couponCode = document.getElementById("coupon-code").value.trim();
            const btn = this;
        
            if (btn.textContent === "Apply Coupon") {
                fetch("{% url 'cart:apply_coupon' %}", {
                    method: "POST",
                    headers: {
                        "X-CSRFToken": "{{ csrf_token }}",
                        "Content-Type": "application/x-www-form-urlencoded",
                    },
                    body: `coupon_code=${encodeURIComponent(couponCode)}`,
                })
                    .then((response) => response.json())
                    .then((data) => {
                        if (data.success) {
                            document.getElementById("coupon-code").value = couponCode;
                            document.getElementById("coupon-code").readOnly = true;
                            btn.textContent = "Remove Coupon";
                            btn.className = "btn btn-danger";
                        } else {
                            alert(data.message);
                        }
                    });
            } else {
                fetch("{% url 'cart:apply_coupon' %}?remove_coupon=true")
                    .then((response) => response.json())
                    .then((data) => {
                        if (data.success) {
                            document.getElementById("coupon-code").value = "";
                            document.getElementById("coupon-code").readOnly = false;
                            btn.textContent = "Apply Coupon";
                            btn.className = "btn btn-primary";
                        }
                    });
            }
        });
 
        function clearCouponField(event) {
            event.preventDefault(); 
            document.querySelector('input[name="coupon_code"]').value = '';  
             document.querySelector('form').submit();
        }
    
    </script>



</body>
</html>